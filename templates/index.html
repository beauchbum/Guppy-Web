<!DOCTYPE HTML>
<!--
	Alpha by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="/static/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '809771009177977',
      cookie     : true,
      xfbml      : true,
      version    : 'v2.8'
    });
    FB.AppEvents.logPageView();   
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>

		
	<script>
	
	function validateForm(form) {
    var x = form["device_select"].value;
    if (x == "no device") {
        alert("Must select device");
        return false;
		}
	}

	function checkLoginState() {
		  FB.getLoginStatus(function(response) {
		    statusChangeCallback(response);
		  });
		}

	function onFacebookLogin(){
		FB.getLoginStatus(function(response) {
  		if (response.status === 'connected') {
	   		var accessToken = response.authResponse.accessToken;
	   		var fb_id = response.authResponse.userID;
	   		document.getElementById("fbLoginToken").value = accessToken;
	   		document.getElementById("fbLoginId").value = fb_id;
	   		document.getElementById("fbLoginForm").submit();

			}
		});
	}





	</script>



		
	</head>
	<body>
<form  id="fbLoginForm" action="/fb_login" method = "POST"><input type="hidden" name="fbLoginToken" id="fbLoginToken" value="null"><input type="hidden" name="fbLoginId" id="fbLoginId" value="null">
</form>
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <img src="/static/images/logo_cropped.png" class="img-circle" alt="Cinque Terre" width="45" height="45" style="vertical-align:bottom">
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

      <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search Users">
        </div>

        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">
      	{% if logged==false %}
	    <li><a href="/authorize">Login</a></li>

	    {% else %}
	    <li><a href="/logout">Logout</a></li>

	        <li class="dropdown">
	          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other Actions <span class="caret"></span></a>
	          <ul class="dropdown-menu">
	            <li>
		            <a href="/refresh_devices">Refresh Devices</a>
		        </li>
	            <li><a href="#">Deactivate Account</a></li>

	          </ul>
	        </li>
	     {% endif %}
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>

			<!-- Main -->
				<section id="main" class="container">
					<!-- <header>
						<h2>Elements</h2>
						<p>Just an assorted selection of elements.</p>
					</header>
					-->
					<!-- <section class="box special"> -->
					<header>

						{% if logged == false %}
							<h2 style="display:inline; padding-right:10px">Guppy</h2>

							<img src="/static/images/logo_cropped.png" class="img-circle" alt="Cinque Terre" width="75" height="75" style="vertical-align:bottom">
							<br>
							<h3>Share your music with friends. Login to get started</h3>
						{% else %}
							<h2 align="center">Your Friends</h2>
							{% if fb_token_valid==1 %}
							<h4 align="center" style="margin-bottom: 0px;">Looking for more? <a href="/refresh_fb_friends">Refresh Facebook Friends</a>
							</h4>
							{% else %}
								<h4 align="center" style="margin-bottom: 0px;">Looking for more?</h4>
								<div id="wrapper" style="text-align: center">    
								    <div class="fb-login-button" data-max-rows="1" data-size="medium" data-button-type="continue_with" data-show-faces="false" data-auto-logout-link=false data-use-continue-as="false" data-scope="public_profile,user_friends" onlogin="onFacebookLogin()"></div>
									</div>
							{% endif %}>
						{% endif %}
					</header>
					<!-- </section> -->
						
						<div class="list-group" style="max-height:500px; overflow: auto">
						
						{% for l in listening %}
							  <a data-toggle="modal" href="#myModal" class="list-group-item list-group-item-action flex-column align-items-start active">
								<div id="parent" style="width:100%">  
								  <div id="colLeft">								
								  	<img src={{ l.prof_pic }} style="vertical-align: middle; height:100%; width:100%;">
								  </div>
								    <div id="colwrap">
								      <div id="colRight">
								      {% if l.playing == 1 %}
								      	<img src="/static/images/green.gif" style="border:none; display:block; margin:0 auto; height:30%; width:30%;">
								     {% elif l.playing == 0 %}
								      	Inactive
								      {% endif %}
								      </div>
								      <div id="colCenter">
										<div style="font-size: 1.5em; padding-left:10px; vertical-align: top;">{{ l.name }}</div>
										
										<div style="font-size: 1.0em; padding-left:15px; vertical-align: bottom;">{{ l.song }} by {{l.artist}}</div>

								      </div>  
								    </div>
								</div>		

							  </a>
							  
							  <div id="myModal" class="modal fade" role="dialog" style="padding-top:40px">
									  <div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
										  <div class="modal-header">
										 
											<h4 class="modal-title">
												{% if l.playing == 1 %}
													{{ l.name }} - 
													<font face="verdana" color="green">Active</font>
													<button type="button" class="close" data-dismiss="modal">&times;</button>
												{% elif l.playing == 0 %}
													{{ l.name }} - 
													<font face="verdana" color="red">Inactive</font>
													<button type="button" class="close" data-dismiss="modal">&times;</button>
												{% endif %}
											</h4>
											

										  </div>
										  <div class="modal-body">
											<img src={{ l.prof_pic }} class="img-circle" height="90" width="90" style="vertical-align: middle">
											<input type="checkbox" data-width="120" checked data-toggle="toggle" data-onstyle="success" data-offstyle="danger" data-on="Following" data-off="Not Following" style="padding-left:20px">
										  </div>	
										  <div class="modal-footer">
											<div class="form-group row"> 

											  <form name="tune_out_form" action="/tune_out" method = "POST"><input type="hidden" name="tune_out_my_gid" value={{ my_gid }} onsubmit="setTimeout(function () { window.location.reload(); }, 10)">


											  <div class="col-md-3">
												<span><button type="submit" class="btn btn-warning"> Tune Out</button></span>
											  </div>
											  
											  </form>
											</div>
										  </div>
										</div>

									  </div>
									</div>
						 {% endfor %}
						{% for f in following %}
							<a data-toggle="modal" href="#{{ f.gid }}" class="list-group-item list-group-item-action flex-column align-items-start">
								<div id="parent" style="width:100%">  
								  <div id="colLeft">								
								  	<img src={{ f.prof_pic }} style="vertical-align: middle; height:100%; width:100%;">
								  </div>
								    <div id="colwrap">
								      <div id="colRight">
								      {% if f.playing == 1 %}
								      	<img src="/static/images/green.gif" style="border:none; display:block; margin:0 auto; height:30%; width:30%;">
								      {% elif f.playing == 0 %}
								      	Inactive
								      {% endif %}

								      </div>
								      <div id="colCenter">
										<div style="font-size: 1.5em; padding-left:10px; vertical-align: top;">{{ f.name }}</div>
										
										<div style="font-size: 1.0em; padding-left:15px; vertical-align: bottom;">{{ f.song }} by {{f.artist}}</div>

								      </div>  
								    </div>
								</div>							
							  </a>
							  
							  <div id="{{ f.gid }}" class="modal fade" role="dialog" style="padding-top:40px">
									  <div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
										  <div class="modal-header">
										 
											<h4 class="modal-title">
											{% if f.playing == 1 %}
												{{ f.name }} - 
												<font face="verdana" color="green">Active</font>
												<button type="button" class="close" data-dismiss="modal">&times;</button>
											{% elif f.playing == 0 %}
												{{ f.name }} - 
												<font face="verdana" color="red">Inactive</font>
												<button type="button" class="close" data-dismiss="modal">&times;</button>
											{% endif %}
											</h4>
											

										  </div>
										  <div class="modal-body">
											<img src={{ f.prof_pic }} class="img-circle" height="90" width="90" style="vertical-align: middle">
											<input type="checkbox" data-width="120" checked data-toggle="toggle" data-onstyle="success" data-offstyle="danger" data-on="Following" data-off="Not Following" style="padding-left:20px">
										  </div>
										  <div class="modal-footer">
											<div class="form-group row"> 

											  <div class="col-md-5" >
											  <form name="tune_form" action="/tune_in" method = "POST" onsubmit="return validateForm(this)"><input type="hidden" name="tune_in_their_gid" value={{ f.gid }}><input type="hidden" name="tune_in_my_gid" value={{ my_gid }}>
											   <select class="form-control" name="device_select" required>
													<option hidden value="no device" >Select Device</option>
													{% for d in devices %}
													<option value = {{ d.device_id }}>{{ d.device_name }} </option>
													{% endfor %}
												</select>
											  </div>
											  
											<div class="col-md-4">
											   <select class="form-control" name="listener" required>
											   		<option value = {{ my_name }}> As {{ my_name }}</option>											
													<option value = "anonymous"> Anonymous </option>
												</select>
												 
											</div>


											  <div class="col-md-3">
												<span><button type="submit" class="btn btn-primary"> Tune In</button></span>
											  </div>
											  
											  </form>
											</div>
										  </div>
										</div>

									  </div>
									</div>
						 {% endfor %}

						</div>
					

					<section class="box special features">
						<div class="features-row">
							<section>
								<span class="icon major fa-bolt accent2"></span>
								<h3>Magna etiam</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
							</section>
							<section>
								<span class="icon major fa-area-chart accent3"></span>
								<h3>Ipsum dolor</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
							</section>
						</div>
						<div class="features-row">
							<section>
								<span class="icon major fa-cloud accent4"></span>
								<h3>Sed feugiat</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
							</section>
							<section>
								<span class="icon major fa-lock accent5"></span>
								<h3>Enim phasellus</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
							</section>
						</div>
					</section>

					<div class="row">
						<div class="6u 12u(narrower)">

							<section class="box special">
								<span class="image featured"><img src="/static/images/pic02.jpg" alt="" /></span>
								<h3>Sed lorem adipiscing</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
								<ul class="actions">
									<li><a href="#" class="button alt">Learn More</a></li>
								</ul>
							</section>

						</div>
						<div class="6u 12u(narrower)">

							<section class="box special">
								<span class="image featured"><img src="/static/images/pic03.jpg" alt="" /></span>
								<h3>Accumsan integer</h3>
								<p>Integer volutpat ante et accumsan commophasellus sed aliquam feugiat lorem aliquet ut enim rutrum phasellus iaculis accumsan dolore magna aliquam veroeros.</p>
								<ul class="actions">
									<li><a href="#" class="button alt">Learn More</a></li>
								</ul>
							</section>

						</div>
					</div>

				</section>

			<!-- CTA -->
				<section id="cta">

					<h2>Sign up for beta access</h2>
					<p>Blandit varius ut praesent nascetur eu penatibus nisi risus faucibus nunc.</p>

					<form>
						<div class="row uniform 50%">
							<div class="8u 12u(mobilep)">
								<input type="email" name="email" id="email" placeholder="Email Address" />
							</div>
							<div class="4u 12u(mobilep)">
								<input type="submit" value="Sign Up" class="fit" />
							</div>
						</div>
					</form>

				</section>

			<!-- Footer -->
				<footer id="footer">
					<ul class="icons">
						<li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
						<li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
						<li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
						<li><a href="#" class="icon fa-github"><span class="label">Github</span></a></li>
						<li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
						<li><a href="#" class="icon fa-google-plus"><span class="label">Google+</span></a></li>
					</ul>
					<ul class="copyright">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</footer>


		<!-- Scripts -->
			<script src="/static/js/jquery.min.js"></script>
			<script src="/static/js/jquery.dropotron.min.js"></script>
			<script src="/static/js/jquery.scrollgress.min.js"></script>
			<script src="/static/js/skel.min.js"></script>
			<script src="/static/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="/static/js/main.js"></script>

	</body>
</html>